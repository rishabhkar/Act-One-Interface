import{_ as e,a as t,o as n,p as r}from"./index-xhhkbfBw.js";import{n as i}from"./api-N7wrmMEW.js";import{t as a}from"./FormField-WCbDBKxH.js";import{t as o}from"./QR Code White-BTUOALxW.js";var s=e();async function c(e){return await i(`/api/donations`,e)}var l=r();function u(e){let t={};e.fullName.trim()||(t.fullName=`Full Name is required.`),e.email.trim()?/^\S+@\S+\.\S+$/.test(e.email.trim())||(t.email=`Enter a valid email.`):t.email=`Email is required.`,e.phone.trim()||(t.phone=`Phone Number is required.`),e.message.trim()||(t.message=`Message is required.`);let n=Number(e.amount);return e.amount.trim()?(!Number.isFinite(n)||n<=0)&&(t.amount=`Enter a valid amount.`):t.amount=`Donation amount is required.`,e.transactionId.trim()||(t.transactionId=`Transaction ID is required.`),t}function d(){let[e,r]=(0,s.useState)({fullName:``,email:``,phone:``,message:``,amount:``,transactionId:``}),[i,d]=(0,s.useState)({}),[f,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)(`idle`),[g,_]=(0,s.useState)(``),[v,y]=(0,s.useState)(null),b=(0,s.useMemo)(()=>({"--glass-gradient":`linear-gradient(145deg, rgba(0,0,0,0.72) 0%, rgba(0,0,0,0.46) 55%, rgba(0,0,0,0.25) 100%)`}),[]);async function x(t){console.log(`[Donation] onSubmit fired`),t.preventDefault(),h(`idle`),_(``),y(null);let n=u(e);if(d(n),Object.keys(n).length>0){console.log(`[Donation] validation blocked submit`,n);return}h(`loading`);try{let t={fullName:e.fullName.trim(),phoneNumber:e.phone.trim(),email:e.email.trim(),message:e.message.trim(),amount:Number(e.amount),transactionId:e.transactionId.trim()};console.log(`[Donation] sending payload`,t);let n=await c(t);y(n?JSON.stringify(n):null),p(!0),h(`idle`)}catch(e){h(`error`),_(e instanceof Error?e.message:`Unable to send your donation details. Please try again.`),console.error(`[Donation] submit failed`,e)}}return(0,l.jsxs)(`div`,{className:`mx-auto max-w-6xl px-4`,children:[(0,l.jsx)(t,{children:(0,l.jsxs)(`div`,{className:`pt-10`,children:[(0,l.jsx)(`h1`,{className:`font-serif text-3xl text-white md:text-4xl`,children:`Support Us`}),(0,l.jsx)(`p`,{className:`mt-3 w-full max-w-none text-sm text-white/70 text-justify`,children:`Act One exists to keep stories alive—by making space for language, music, memory, and the people who carry them. If our work has moved you, consider supporting us so we can keep nurturing rehearsal rooms, young artists, and performances that celebrate culture with care.`}),(0,l.jsx)(`p`,{className:`mt-3 w-full max-w-none text-sm text-white/70 text-justify`,children:`Donations are accepted via UPI.`})]})}),(0,l.jsxs)(`div`,{className:`mt-8 grid gap-6 lg:grid-cols-2`,children:[(0,l.jsx)(t,{children:(0,l.jsxs)(n,{className:`p-6 md:p-8`,style:b,children:[(0,l.jsx)(`div`,{className:`flex items-start justify-between gap-6`,children:(0,l.jsxs)(`div`,{children:[(0,l.jsx)(`div`,{className:`text-sm font-semibold text-white`,children:`Donate via UPI`}),(0,l.jsx)(`div`,{className:`mt-2 text-sm text-white/70`,children:`Scan the QR code to donate. Every contribution helps us build brave theatre.`})]})}),(0,l.jsx)(`div`,{className:`mt-6 overflow-hidden rounded-2xl border border-white/10 bg-black/30 p-3`,children:(0,l.jsx)(`img`,{src:o,alt:`UPI QR code`,className:`w-full rounded-xl`,decoding:`async`})}),(0,l.jsx)(`div`,{className:`mt-4 text-xs text-white/55`,children:`Tip: If you’re donating on mobile, open this page on the same device and scan from your banking/UPI app.`})]})}),(0,l.jsx)(t,{children:(0,l.jsxs)(n,{className:`p-6 md:p-8`,style:b,children:[(0,l.jsx)(`div`,{className:`text-sm font-semibold text-white`,children:`Send us a message with your donation`}),(0,l.jsx)(`div`,{className:`mt-2 text-sm text-white/70`,children:`Fill this form so we can thank you and share updates.`}),f?(0,l.jsx)(`div`,{className:`mt-6 rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/80`,children:`Thank you. We’ve received your message.`}):(0,l.jsxs)(`form`,{className:`mt-6 space-y-5`,onSubmit:x,noValidate:!0,children:[(0,l.jsx)(a,{id:`support-fullName`,label:`Full Name`,required:!0,value:e.fullName,onChange:e=>r(t=>({...t,fullName:e})),error:i.fullName,placeholder:`Your name`}),(0,l.jsx)(a,{id:`support-email`,label:`Email`,required:!0,type:`email`,value:e.email,onChange:e=>r(t=>({...t,email:e})),error:i.email,placeholder:`name@example.com`}),(0,l.jsx)(a,{id:`support-phone`,label:`Phone Number`,required:!0,type:`tel`,value:e.phone,onChange:e=>r(t=>({...t,phone:e})),error:i.phone,placeholder:`+91…`}),(0,l.jsx)(a,{id:`support-amount`,label:`Donation Amount (INR)`,required:!0,type:`number`,value:e.amount,onChange:e=>r(t=>({...t,amount:e})),error:i.amount,placeholder:`e.g. 50`}),(0,l.jsx)(a,{id:`support-message`,label:`Message`,required:!0,as:`textarea`,value:e.message,onChange:e=>r(t=>({...t,message:e})),error:i.message,placeholder:`Keep up the great work`}),(0,l.jsx)(a,{id:`support-transactionId`,label:`Transaction ID`,required:!0,value:e.transactionId,onChange:e=>r(t=>({...t,transactionId:e})),error:i.transactionId,placeholder:`Paste the UPI transaction reference`,rightSlot:(0,l.jsx)(`span`,{className:`text-xs text-white/60`,children:`Transaction References are required for government auditing purposes`})}),m===`error`?(0,l.jsx)(`div`,{className:`rounded-2xl border border-red-400/20 bg-red-500/10 p-4 text-sm text-red-100`,children:g||`Unable to submit right now. Please try again.`}):null,(0,l.jsx)(`div`,{className:`pt-1`,children:(0,l.jsx)(`button`,{type:`submit`,className:`btn-primary w-full`,disabled:m===`loading`,onClick:()=>console.log(`[Donation] submit button clicked`),children:m===`loading`?`Submitting…`:`Submit`})}),v?(0,l.jsx)(`div`,{className:`rounded-2xl border border-white/10 bg-white/5 p-4 text-xs text-white/70 break-all`,children:v}):null]})]})})]}),(0,l.jsx)(`div`,{className:`h-10`})]})}export{d as default};