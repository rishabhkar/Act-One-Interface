import{_ as e,a as t,o as n,p as r}from"./index-Dw7Ci3Tn.js";import{n as i}from"./api-jZiQ2L04.js";import{t as a}from"./FormField-DIvLJr8k.js";var o=e();async function s(e){return await i(`/api/feedback`,e)}var c=r();function l(e){let t={};return e.fullName.trim()||(t.fullName=`Full Name is required.`),e.email.trim()?/^\S+@\S+\.\S+$/.test(e.email.trim())||(t.email=`Enter a valid email.`):t.email=`Email is required.`,e.phone.trim()||(t.phone=`Phone Number is required.`),e.message.trim()||(t.message=`Feedback message is required.`),t}function u(){let[e,r]=(0,o.useState)({fullName:``,email:``,phone:``,showName:``,showVenue:``,message:``}),[i,u]=(0,o.useState)({}),[d,f]=(0,o.useState)(!1),[p,m]=(0,o.useState)(`idle`),[h,g]=(0,o.useState)(``),[_,v]=(0,o.useState)(null),y=(0,o.useMemo)(()=>({"--glass-gradient":`linear-gradient(145deg, rgba(0,10,55,0.35) 0%, rgba(0,0,0,0.55) 55%, rgba(0,0,0,0.25) 100%)`}),[]);async function b(t){console.log(`[Feedback] onSubmit fired`),t.preventDefault(),m(`idle`),g(``),v(null);let n=l(e);if(u(n),Object.keys(n).length>0){console.log(`[Feedback] validation blocked submit`,n);return}m(`loading`);try{let t={fullName:e.fullName.trim(),phoneNumber:e.phone.trim(),email:e.email.trim(),message:e.message.trim()};console.log(`[Feedback] sending payload`,t);let n=await s(t);v(n?JSON.stringify(n):null),f(!0),m(`idle`)}catch(e){m(`error`),g(e instanceof Error?e.message:`Unable to send feedback. Please try again.`),console.error(`[Feedback] submit failed`,e)}}return(0,c.jsxs)(`div`,{className:`mx-auto max-w-6xl px-4`,children:[(0,c.jsx)(t,{children:(0,c.jsxs)(`div`,{className:`pt-10`,children:[(0,c.jsx)(`h1`,{className:`font-serif text-3xl text-white md:text-4xl`,children:`Feedback`}),(0,c.jsx)(`p`,{className:`mt-3 w-full max-w-none text-sm text-white/70 text-justify`,children:`Your words help us grow. Tell us what stayed with you—moments, music, performances, or anything we can do better.`})]})}),(0,c.jsx)(t,{children:(0,c.jsx)(n,{className:`mt-8 p-6 md:p-8`,style:y,children:d?(0,c.jsx)(`div`,{className:`rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/80`,children:`Thank you for your feedback.`}):(0,c.jsxs)(`form`,{className:`space-y-5`,onSubmit:b,noValidate:!0,children:[(0,c.jsxs)(`div`,{className:`grid gap-5 md:grid-cols-2`,children:[(0,c.jsx)(a,{id:`feedback-fullName`,label:`Full Name`,required:!0,value:e.fullName,onChange:e=>r(t=>({...t,fullName:e})),error:i.fullName}),(0,c.jsx)(a,{id:`feedback-email`,label:`Email`,required:!0,type:`email`,value:e.email,onChange:e=>r(t=>({...t,email:e})),error:i.email}),(0,c.jsx)(a,{id:`feedback-phone`,label:`Phone Number`,required:!0,type:`tel`,value:e.phone,onChange:e=>r(t=>({...t,phone:e})),error:i.phone}),(0,c.jsx)(a,{id:`feedback-showName`,label:`Show Name`,value:e.showName,onChange:e=>r(t=>({...t,showName:e})),error:i.showName,placeholder:`e.g. Chenni`}),(0,c.jsx)(a,{id:`feedback-showVenue`,label:`Show Venue`,value:e.showVenue,onChange:e=>r(t=>({...t,showVenue:e})),error:i.showVenue,placeholder:`e.g. LTG Auditorium`})]}),(0,c.jsx)(a,{id:`feedback-message`,label:`Your Feedback`,required:!0,as:`textarea`,value:e.message,onChange:e=>r(t=>({...t,message:e})),error:i.message,placeholder:`What did you feel? What should we keep, change, or explore next?`}),p===`error`?(0,c.jsx)(`div`,{className:`rounded-2xl border border-red-400/20 bg-red-500/10 p-4 text-sm text-red-100`,children:h||`Unable to send feedback right now. Please refresh and try again.`}):null,(0,c.jsx)(`div`,{className:`pt-1`,children:(0,c.jsx)(`button`,{type:`submit`,className:`btn-primary w-full`,disabled:p===`loading`,onClick:()=>console.log(`[Feedback] submit button clicked`),children:p===`loading`?`Submitting…`:`Submit Feedback`})}),_?(0,c.jsx)(`div`,{className:`rounded-2xl border border-white/10 bg-white/5 p-4 text-xs text-white/70 break-all`,children:_}):null]})})}),(0,c.jsx)(`div`,{className:`h-10`})]})}export{u as default};